# Extensions
## Оглавления
- [Extensions - что это и для чего?](#extensions---что-это-и-для-чего)
- [Как функции расширения работают под капотом?](#как-функции-расширения-работают-под-капотом)
- [Как extensions выглядят в Java?](#как-extensions-выглядят-в-java)
## Extensions - что это и для чего?
Это функции, которые позволяют добавить функционал к уже определенным типам.

Kotlin предлагает нам концепцию «Extension Function»: мы можем к любому существующему типу добавить функцию-расширение,
которая будет доступна через все объекты этого типа (но будет иметь доступ только к публичным частям).
- Для добавления функционала класса, если он закрыт для расширения (например, лежит в сторонней библиотеке).
- Для расширения nullable типов.
- Для расширения companion object.
- Для расширения свойств существующих классов.
- Для конвертации моделей из одной в другую.
- Для расширения функционала дженериков.
## Как функции расширения работают под капотом?
По своей задумке, функция расширения Kotlin — это дополнительный метод для любого объекта, даже для потенциально
несуществующего (нуллабельного). Этот инструмент является прямой реализацией переопределения методов паттерна 
проектирования Декоратор.

ВАЖНО: В функциях расширения мы можем обращаться к любым общедоступным свойствам и методам объекта, однако не можем 
обращаться к свойствам и методам с модификаторами private и protected.

ВАЖНО: Функции расширения не переопределяют функции, которые уже определены в классе. Если функция расширения имеет ту
же сигнатуру, что и уже имеющаяся функция класса, то компилятор просто будет игнорировать подобную функцию расширения.

Определение аналогично определению обычной функции за тем исключением, что после слова fun идет название типа, для 
которого определяется функция, и через точку название функции. Определим пару функций расширения к типам Int и String:

```kotlin
fun main() {
    val hello = "hello world"
    println(hello.charCount('l'))   // 3
    println(hello.charCount('o'))   // 2
    println(4.square())             // 16
    println(6.square())             // 36
}

fun String.charCount(c: Char): Int {
    var count = 0
    for (n in this) {
        if (n == c) count++
    }
    return count
}

fun Int.square(): Int {
    return this * this
}
```
## Как extensions выглядят в Java?
Функции расширения для JVM являются static final методами.

Extensions в Kotlin не имеют прямого эквивалента в Java. Однако, компилятор Kotlin генерирует соответствующий
статический метод в классе-компаньоне, который может быть вызван из Java кода в качестве статического метода этого
класса.