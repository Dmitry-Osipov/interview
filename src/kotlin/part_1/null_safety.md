# Null Safety
## Оглавление
- [Что такое Null safety, nullable и non-nullable типы?](#что-такое-null-safety-nullable-и-non-nullable-типы)
- [Способы проверки значения на null (if-else, операторы ?./!!/?:)](#способы-проверки-значения-на-null-if-else-операторы-)
## Что такое Null safety, nullable и non-nullable типы?
Null safety — это концепция безопасности, которая предотвращает некоторые из наиболее распространенных ошибок в 
программировании, связанных с использованием null-значений. В Kotlin эта концепция реализуется за счет строгой 
типизации и системы Nullable/Non-nullable типов данных.

Nullable типы — это типы, которые могут содержать значение null. Non-nullable типы — это типы, которые не могут
содержать значение null и всегда должны иметь некоторое значение.

В Kotlin переменные по умолчанию являются non-nullable — это означает, что они не могут принимать значение null. Если 
переменная может принимать значение null, то ее нужно объявить с использованием знака вопроса (?). При использовании 
Nullable переменной в коде Kotlin не допустит обращение к ней без предварительной проверки на null-значение.

Также Kotlin предоставляет множество функций для безопасной работы с nullable-значениями, таких как операторы elvis ?:,
безопасный вызов ?. и другие.

В целом, концепция Null safety помогает разработчикам избежать ошибок связанных с null-значениями, уменьшает количество
ошибок в работе приложения и упрощает разработку и поддержку кода.
## Способы проверки значения на null (if-else, операторы ?./!!/?:)
Kotlin разграничивает типы с поддержкой и без поддержки null-значений. Это означает, что при объявлении переменной,
которая может хранить null, нужно явно объявить ее как nullable при помощи символа ?.
```kotlin
val languageName: String? = null
```
Объявляя nullable переменную вы берёте на себя ответственность по проверке её значения. Иначе компилятор будет запрещать
вызов функций для таких значений, ведь это может привести к NullPointerException.

Рассмотрим все доступные способы проверки значения на null:
1) Проверка с помощью if-else

Пожалуй, это самый простой способ проверки значения на null и скорее всего будет многим знаком.
```kotlin
if(languageName != null) {
    print("Name is : $languageName")
} else {
    print("Please enter a valid name")
}
```
Использование оператора безопасного вызова будет предпочтительнее, так как он позволяет решить проблему меньшим
количеством кода. Однако, если со значением переменной производятся какие-то сложные вычисления и перед началом
вычислений нужно проверить равно ли оно null, то if-else вполне подойдёт.
2) Оператор безопасного вызова ?.

Оператор безопасного вызова позволяет сказать компилятору, что значением данной переменной может быть null и его стоит
проверить перед дальнейшим использованием.
```kotlin
languageName?.length
```
То есть, если значение переменной languageName равно null, то компилятор не будет пытаться определить длину слова, а
просто вернёт null.

Если вы хотите вызвать функцию или каким-то другим способом обработать значение, отличное от null, то совместно с
оператором безопасного вызова используйте функцию let. Всё, что будет указано в функции let выполнится только в том
случае, если значение переменной отлично от null.
```kotlin
languageName?.let { println(it) }
```
3) Оператор !!

Два восклицательных знака, стоящих после nullable-значения, преобразуют его к типу без поддержки null. При этом перед 
преобразованием никак не проверяется, что значение действительно не содержит null. Поэтому, если в процессе выполнения
программы окажется, что значение, которое пытается преобразовать оператор !!, все-таки null, то останется только один
выход — выбросить исключение NullPointerException. Если оно не обрабатывается кодом, программа аварийно завершится. 
Несмотря на удобство этого оператора, его следует использовать только там, где вы уверены, что null быть не может.

Данный оператор понравится любителям NullPointerException. Он как бы говорит компилятору, что если значение 
переменной — null, то ТРЕБУЮ выбросить NullPointerException.
```kotlin
val languageName: String? = null
val size = languageName!!.length
```
Использование данного оператора крайне не рекомендуется, потому что (очевидно) это один из немногих способов словить
NPE. При его использовании вы должны быть уверены, что значение переменной ни при каких обстоятельствах не может быть
null. В противном случае лучше использовать оператор безопасного вызова.
4) Оператор Элвиса или оператор объединения по null ?:

Оператор Элвиса подобен проверке на null в варианте if-else. Элвис используется для замены null каким-либо значением, 
принадлежащим обычно зауженному типу. В результате выражение с элвисом позволяет не увеличивать в программе количество 
nullable-переменных.

Оператор указывается между двумя значениями. Если значение слева от оператора равно null, то применяется значение 
справа:
```kotlin
val size: Int = languageName.length ?: 0
```
Если значение languageName не равно null, его длина будет присвоена переменной size. Если languageName равно null,
тогда будет присвоено значение 0. Но в любом случае переменной size будет присвоено значение типа Int, а не Int?,
то есть non-null тип. Использование данного оператора с функцией let может полностью заменить проверку с помощью 
оператора if-else.
```kotlin
// с использованием if-else
if(languageName != null) {
    print("Name is : $languageName")
} else {
    print("Please enter a valid name")
}

// Элвис оператор и функция let
languageName?.let {
  print("Name is : $languageName")
} ?: print("Please enter a valid name")
```
